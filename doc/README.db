Some notes about basic operations data base related.
  

caveat: the DB refered to is not a true data base in the usual
  meaning computer science assumes. It is only a way of storing
  and accessing data, that some code that we provide knows about.

0.0) The db software requires that a date (in the format yyyymmdd)
can be isolated as a directory name in the path to images.
19980918-a would anyway be acceptable, but a-19980918 would not.
0.1) the utilities described here  are located in the dbutils
source directory (parallel to src) and are compiled/linked
by make dbutils. No scheme is provided to make
them visible in the PATH.



The easy way to to install your data:
  - create somewere (in $INTDAT for example )
a directory named from the date of the beginning of the night 
  e.g. 19990310
  - create a 'raw' directory in there, and direct the raw images
  as the telescope provides them in there (likely through ftp)
  - The images that come in should be somehow inserted in
    the data base, and you have to tell where. The easiest location
    is simply the directory named after the date.

  - for flats biases and dead pixel maps, install them in corresponding 
    directories parallel to 'raw':
         19990310/bias
         19990310/flat 
         ...

  a new_night script creates this little structure. It may be wise
  at this stage to set a DATE environment variable to 19990310,
  until somebody provides a script able to build this date reliably.


1) insertion in the db of a raw image


syntax : insert_image <where> <image_file...>

  <where>  is the physical path in which the image will be inserted.
   To make it accessible by the software, this path will have to be 
   declared in the data base config file.
      The image will not be copied but a link will be created
   on the physical file. For the link to be created as a relative link
   ( i.e. containing '../' things, which enables to keep the correct
   pointing when both the link and its target move together), the way
   is to provide the complete path for both arguments, and to provide
   them without things like '../' and './'.

      If the code figures out that the image is a bias, 
   it ignores it. Sky flats go through. If the image was
   already inserted, nothing happens.

      The name of the image will be the image_file name without
   its extension (eg r124280).

############
note : from now on the images may be refered to by their symbolic name,
provided that the path they are in (as given in install_image)
is in the db config file.
############


2) assignement of the flat to the images
assign_flat <image> <flat>

all the argument possibilities are printed by 
> assign_flat

3) list db contents:

lsi <image>... <path> ...
wildcard characters are handled in pathes, not images.

to list all db images in all pathes defined by the config file:
>lsi '*'

the quotes are there to prevent the shell to interpret the *. Note
that when you type 
> ls *
the * is expanded by the shell, not by ls.



   

 
