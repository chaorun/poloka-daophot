<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>superflat.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; <a class="qindexRef" doxygen="_cgi:http://ici.la.bas/toto/tata/search.cgi" href="http://ici.la.bas/toto/tata/search.cgi">Search</a> &nbsp; </center>
<hr><h1>superflat.h</h1><div class="fragment"><pre>00001 <font class="preprocessor">#ifndef SUPERFLAT__H</font>
00002 <font class="preprocessor"></font><font class="preprocessor">#define SUPERFLAT__H</font>
00003 <font class="preprocessor"></font>
00004 <font class="preprocessor">#include "<a class="code" href="image_h.html">image.h</a>"</font>
00005 <font class="preprocessor">#include &lt;vector&gt;</font>
00006 
00007 <font class="keyword">class </font><a class="code" href="class_fitsset.html">FitsSet</a>;
00008 
00009 <font class="keywordtype">double</font> GainMultiply(<a class="code" href="class_fitsimage.html">FitsImage</a> &amp;Current);
00010 
00011 <a class="code" href="class_image.html">Image</a> *MakeSuperFlat(<font class="keyword">const</font> <a class="code" href="class_fitsset.html">FitsSet</a> &amp;FitsFileSet, <font class="keyword">const</font> <a class="code" href="class_image.html">Image</a> *Bias, <font class="keyword">const</font> <a class="code" href="class_image.html">Image</a> *SkyFLat);
00012 
00013 <a class="code" href="class_image.html">Image</a> *DeadPixelImageAndFlatSmoothing(<a class="code" href="class_image.html">Image</a> &amp;Flat, <font class="keywordtype">double</font> FlatMin, <font class="keywordtype">double</font> FlatMax);
00014 
00015 <font class="keywordtype">double</font> ImageMaxCut   (<font class="keyword">const</font> <a class="code" href="class_image.html">Image</a> &amp;Current, <font class="keyword">const</font> <a class="code" href="class_image.html">Image</a> &amp;Flat);
00016 
00017 <a class="code" href="class_image.html">Image</a> *MakeRawAverage(<font class="keyword">const</font> <a class="code" href="class_fitsset.html">FitsSet</a> &amp;FitsFileSet);
00018 
00019 <a class="code" href="class_image.html">Image</a> *MakeRawMedian(<font class="keyword">const</font> <a class="code" href="class_fitsset.html">FitsSet</a> &amp;FitsFileSet);
00020 
00021 <font class="keywordtype">void</font> MakeRawAverageAndSigma(<font class="keyword">const</font> <a class="code" href="class_fitsset.html">FitsSet</a> &amp;FitsFileSet, <font class="keyword">const</font> <a class="code" href="class_image.html">Image</a> &amp;Bias, <font class="keyword">const</font> <a class="code" href="class_image.html">Image</a> &amp;SkyFlat, <font class="keyword">const</font> vector&lt;double&gt; &amp;norm, <a class="code" href="class_image.html">Image</a> &amp;Mean, <a class="code" href="class_image.html">Image</a> &amp;Sigma);
00022 
00023 
00024 <font class="keywordtype">int</font> FlatFieldImage(<font class="keyword">const</font> string &amp;InFileName, <font class="keyword">const</font> string &amp;FlatName, 
00025                    <font class="keyword">const</font> string &amp;BiasName, <font class="keyword">const</font> string &amp;FringeName, 
00026                    <font class="keyword">const</font> string &amp;OutFileName);
00027 
00028 <font class="keywordtype">void</font>  RawHighFreqFilter(<a class="code" href="class_image.html">Image</a> &amp;Img, <font class="keyword">const</font> <font class="keywordtype">int</font> GridSize);
00029 
00030 <font class="keywordtype">void</font> SubNormFringes(<font class="keyword">const</font> string &amp;InFileName, <font class="keyword">const</font> <a class="code" href="class_image.html">Image</a> &amp;Fringe,
00031                     <font class="keyword">const</font> <font class="keywordtype">bool</font> norm);
00032 
00033 <font class="keywordtype">void</font> ImageAlreadyFlatFielded(<font class="keyword">const</font> string &amp;InFileName, <font class="keyword">const</font> <a class="code" href="class_image.html">Image</a> &amp;Flat,
00034                              <font class="keyword">const</font> string &amp;OutFileName);
00035 <font class="keywordtype">double</font> ImageNormalisation(<a class="code" href="class_fitsimage.html">FitsImage</a> &amp;Current);
00036 
00037 <font class="keywordtype">void</font> FilterFringes(<a class="code" href="class_image.html">Image</a> &amp;FringePattern, <font class="keyword">const</font> <font class="keywordtype">int</font> GridSize, <font class="keyword">const</font> <font class="keywordtype">int</font> NInc);
00038   <font class="comment">//Creates a inclination map, by sweeping a GridSize X GridSize/2 window on each pixels, catching the </font>
00039   <font class="comment">// optimal inclination. To search for optimality we do for each angle:</font>
00040   <font class="comment">// - rotate and interpolate</font>
00041   <font class="comment">// - get the median over each column</font>
00042   <font class="comment">// - get the rms of medians</font>
00043   <font class="comment">// - picks up the angle where rms in minimal</font>
00044   <font class="comment">// InclinationMap(i,j) = bestangle</font>
00045   <font class="comment">//Then a single one pixel wide window (length is typically 10pixels) </font>
00046   <font class="comment">//is properly orientated on the original given fringe frame. Finally the median of the </font>
00047   <font class="comment">//intensity distribution over this window is adopted as the final intensity at the </font>
00048   <font class="comment">//given position. (Ostrov PASP 109,p.338)</font>
00049 
00050 <a class="code" href="class_image.html">Image</a>* MakeFringePattern(<font class="keyword">const</font> <a class="code" href="class_image.html">Image</a> &amp;FringedImage,<font class="keyword">const</font> <a class="code" href="class_image.html">Image</a> &amp;BlankImage, <font class="keyword">const</font> <font class="keywordtype">double</font> &amp;Nsig, <font class="keyword">const</font> <font class="keywordtype">bool</font> &amp;BackFlag, <font class="keyword">const</font> <font class="keywordtype">bool</font> &amp;FilterFlag);
00051   <font class="comment">//Make a fringe map by simply dividing an image (usually a superflat) by a another flat.</font>
00052   <font class="comment">// This other flat should be a blank, objectless, fringeless image, typically a dome or twillight flat.</font>
00053   <font class="comment">// It can also froce the min and max, remove a background and filter the fringes.</font>
00054   <font class="comment">// Note that the 2 input images should be normalized the same.</font>
00055 
00056 <font class="keywordtype">void</font> RemoveFringes(<a class="code" href="class_image.html">Image</a> &amp;FringedImage, <font class="keyword">const</font> <a class="code" href="class_image.html">Image</a> &amp;FringeMap,<font class="keyword">const</font> <font class="keywordtype">bool</font> &amp;NormFlag);
00057   <font class="comment">// Remove fringe pattern. Calculate new sigma and sky value by taking the normalisation factor </font>
00058   <font class="comment">// of the fringe map as the one representing the best sky sigma.</font>
00059   <font class="comment">// This is done cause fringes are at the specific OH wavelength whereas sky noise is spread out</font>
00060   <font class="comment">// Assume also FringeMap is normalized to 1.</font>
00061 
00062 <font class="preprocessor">#endif </font><font class="comment">/* SUPERFLAT__H */</font>
</pre></div><hr><address><small>Generated at Sun Feb 8 18:22:49 2004 for toads by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
