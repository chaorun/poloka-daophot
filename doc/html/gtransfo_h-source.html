<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>gtransfo.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; <a class="qindexRef" doxygen="_cgi:http://ici.la.bas/toto/tata/search.cgi" href="http://ici.la.bas/toto/tata/search.cgi">Search</a> &nbsp; </center>
<hr><h1>gtransfo.h</h1><a href="gtransfo_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="preprocessor">#ifndef GTRANSFO__H</font>
00002 <font class="preprocessor"></font><font class="preprocessor">#define GTRANSFO__H</font>
00003 <font class="preprocessor"></font>
00004 <font class="preprocessor">#include &lt;iostream&gt;</font>
00005 <font class="preprocessor">#include &lt;iomanip&gt;</font>
00006 <font class="preprocessor">#include &lt;fstream&gt;</font>
00007 <font class="preprocessor">#include &lt;string&gt;</font>
00008 
00009 <font class="preprocessor">#include "<a class="code" href="point_h.html">point.h</a>"</font>
00010 
00016 <font class="keyword">class </font>StarMatchList;
00017 <font class="preprocessor">#include "rootstuff.h"</font>
00018 <font class="keyword">class </font><a class="code" href="class_frame.html">Frame</a>;
00019 <font class="keyword">class </font><a class="code" href="class_gtransfolin.html">GtransfoLin</a>;
00020 
00022 
<a name="l00035"></a><a class="code" href="class_gtransfo.html">00035</a> <font class="keyword">class </font><a class="code" href="class_gtransfo.html">Gtransfo</a>
00036 #ifdef  USE_ROOT
00037 : <font class="keyword">public</font> TObject
00038 #endif <font class="comment">/* USE_ROOT */</font>
00039 {
00040 
00041 <font class="keyword">public</font>:
00042 
00044   <font class="keyword">virtual</font> <font class="keywordtype">void</font>  apply(<font class="keyword">const</font> <font class="keywordtype">double</font> Xin, <font class="keyword">const</font> <font class="keywordtype">double</font> Yin, <font class="keywordtype">double</font> &amp;Xout, <font class="keywordtype">double</font> &amp;Yout) <font class="keyword">const</font> = 0 ;
00045 
<a name="l00047"></a><a class="code" href="class_gtransfo.html#a1">00047</a>   <font class="keywordtype">void</font> apply(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Pin, <a class="code" href="class_point.html">Point</a> &amp;Pout)<font class="keyword"> const </font>
00048 <font class="keyword">      </font>{apply(Pin.x, Pin.y, Pout.x, Pout.y);}
00049 
00051   <a class="code" href="class_point.html">Point</a> apply(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Pin)<font class="keyword"> const </font>
00052 <font class="keyword">      </font>{<font class="keywordtype">double</font> xout, yout; apply(Pin.x, Pin.y, xout,yout); 
00053       <font class="keywordflow">return</font> Point(xout,yout);}
00054 
00056   <font class="keyword">virtual</font> <font class="keywordtype">void</font> dump(ostream &amp;stream = cout) <font class="keyword">const</font> = 0;
00057 
00058 
00060 
00062   <font class="keyword">virtual</font> <font class="keywordtype">double</font> fit(<font class="keyword">const</font> StarMatchList &amp;List, <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PriorTransfo = NULL, 
00063                      <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PosteriorTransfo = NULL) = 0;
00064 
<a name="l00066"></a><a class="code" href="class_gtransfo.html#a5">00066</a>   <a class="code" href="class_point.html">Point</a> operator()(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;In)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> apply(In);};
00067 
00069   <font class="keyword">virtual</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *ReduceCompo(<font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *Right) <font class="keyword">const</font>;
00070 
00072   <font class="keyword">virtual</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *Clone() <font class="keyword">const</font> = 0;
00073 
00075   <font class="keyword">virtual</font> <font class="keywordtype">double</font> Jacobian(<font class="keyword">const</font> <font class="keywordtype">double</font> x, <font class="keyword">const</font> <font class="keywordtype">double</font> y) <font class="keyword">const</font>;
00076 
00078   <font class="keyword">virtual</font> <font class="keywordtype">void</font> Derivative(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Where, <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;Der, 
00079                           <font class="keyword">const</font> <font class="keywordtype">double</font> Step = 0.01) <font class="keyword">const</font>;
00080 
00082   <font class="keyword">virtual</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> LinearApproximation(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Where, 
00083                                           <font class="keyword">const</font> <font class="keywordtype">double</font> step = 0.01) <font class="keyword">const</font>;
00084 
00086   <font class="keyword">virtual</font> <font class="keywordtype">void</font> TransformErrors(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Where, <font class="keyword">const</font> <font class="keywordtype">double</font> *VIn, 
00087                                <font class="keywordtype">double</font> *VOut) <font class="keyword">const</font>;
00088 
00090 
00092   <font class="keyword">virtual</font> <a class="code" href="class_gtransfo.html">Gtransfo</a>* InverseTransfo(<font class="keyword">const</font> <font class="keywordtype">double</font> Precision,
00093                                    <font class="keyword">const</font> <a class="code" href="class_frame.html">Frame</a>&amp; Region) <font class="keyword">const</font>;
00094 
00096 
00098   <font class="keyword">virtual</font> <a class="code" href="class_gtransfo.html">Gtransfo</a>* RoughInverse(<font class="keyword">const</font> <a class="code" href="class_frame.html">Frame</a> &amp;Region) <font class="keyword">const</font>;
00099 
<a name="l00101"></a><a class="code" href="class_gtransfo.html#a14">00101</a>   <font class="keyword">virtual</font> <font class="keywordtype">int</font> Npar()<font class="keyword"> const </font>{<font class="keywordflow">return</font> 0;}
00102 
00103   <font class="keyword">virtual</font> ~Gtransfo()<font class="keyword"> </font>{};
00104 
00105 <font class="preprocessor">#ifdef USE_ROOT</font>
00106 <font class="preprocessor"></font>  <font class="keywordtype">int</font> root_write(<font class="keyword">const</font> <font class="keywordtype">char</font>*FileName, <font class="keyword">const</font> <font class="keywordtype">char</font> *FileStatus = <font class="stringliteral">"RECREATE"</font>, <font class="keyword">const</font> <font class="keywordtype">char</font>* ObjectName=NULL);
00107 
00108   ClassDef(<a class="code" href="class_gtransfo.html">Gtransfo</a>,1)
00109 
00110 <font class="preprocessor">#endif </font><font class="comment">/*USE_ROOT */</font>
00111 
00112 };
00113 
00114 <font class="preprocessor">#ifdef USE_ROOT</font>
00115 <font class="preprocessor"></font>
00116 <a class="code" href="class_gtransfo.html">Gtransfo</a> *GtransfoRead(<font class="keyword">const</font> <font class="keywordtype">char</font>* FileName, <font class="keyword">const</font> <font class="keywordtype">char</font>* ObjectName = NULL);
00117 <font class="preprocessor">#endif </font><font class="comment">/* USE_ROOT */</font>
00118 
00120 ostream &amp; <a class="code" href="starmatch_h.html#a3">operator &lt;&lt; </a>(ostream &amp;stream, <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> &amp; T);
00121 
00122 
00124 
00125 <a class="code" href="class_gtransfo.html">Gtransfo</a> *<a class="code" href="gtransfo_h.html#a1">GtransfoCompose</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *Left, <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *Right);
00126 
00127 
00128 <font class="comment">/*=============================================================*/</font>
<a name="l00130"></a><a class="code" href="class_gtransfoidentity.html">00130</a> <font class="keyword">class </font><a class="code" href="class_gtransfoidentity.html">GtransfoIdentity</a> : <font class="keyword">public</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> {
00131 
00132   <font class="keyword">public</font> :
<a name="l00134"></a><a class="code" href="class_gtransfoidentity.html#a0">00134</a>     <a class="code" href="class_gtransfoidentity.html#a0">GtransfoIdentity</a>()<font class="keyword"> </font>{}
00135 
<a name="l00137"></a><a class="code" href="class_gtransfoidentity.html#a1">00137</a>     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a1">apply</a>(<font class="keyword">const</font> <font class="keywordtype">double</font> Xin, <font class="keyword">const</font> <font class="keywordtype">double</font> Yin, 
00138                <font class="keywordtype">double</font> &amp;Xout, <font class="keywordtype">double</font> &amp;Yout)<font class="keyword"> const </font>
00139 <font class="keyword">      </font>{Xout = Xin; Yout = Yin;}; <font class="comment">// to speed up</font>
00140 
<a name="l00141"></a><a class="code" href="class_gtransfoidentity.html#a2">00141</a>     <font class="keywordtype">double</font> <a class="code" href="class_gtransfo.html#a4">fit</a>(<font class="keyword">const</font> StarMatchList &amp;List, <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PriorTransfo = NULL , 
00142                <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PosteriorTransfo = NULL)<font class="keyword"></font>
00143 <font class="keyword">      </font>{cerr &lt;&lt; <font class="stringliteral">"GtransfoIdentity cannot be fitted : for list : "</font>  &lt;&lt; &amp;List &lt;&lt; 
00144          <font class="stringliteral">" and transfos "</font> &lt;&lt; PriorTransfo &lt;&lt; <font class="charliteral">' '</font> &lt;&lt; PosteriorTransfo &lt;&lt; endl; <font class="keywordflow">return</font> 0;}
00145 
<a name="l00146"></a><a class="code" href="class_gtransfoidentity.html#a3">00146</a>     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a6">ReduceCompo</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *Right)<font class="keyword"> const </font>{ <font class="keywordflow">return</font> Right-&gt;<a class="code" href="class_gtransfo.html#a7">Clone</a>();}
<a name="l00147"></a><a class="code" href="class_gtransfoidentity.html#a4">00147</a>     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a3">dump</a>(ostream &amp;stream = cout)<font class="keyword"> const </font>
00148 <font class="keyword">         </font>{ stream &lt;&lt; <font class="stringliteral">"x' = x\ny' = y"</font>&lt;&lt; endl;}
00149 
<a name="l00150"></a><a class="code" href="class_gtransfoidentity.html#a5">00150</a>     <font class="keywordtype">int</font> <a class="code" href="class_gtransfo.html#a14">Npar</a>()<font class="keyword"> const </font>{<font class="keywordflow">return</font> 0;}
<a name="l00151"></a><a class="code" href="class_gtransfoidentity.html#a6">00151</a>     <a class="code" href="class_gtransfo.html">Gtransfo</a> *<a class="code" href="class_gtransfo.html#a7">Clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_gtransfoidentity.html">GtransfoIdentity</a>;}
00152 
00153     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a9">Derivative</a>(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Where, <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;Derivative, 
00154                     <font class="keyword">const</font> <font class="keywordtype">double</font> Step = 0.01) <font class="keyword">const</font>;
00155 
00157     <font class="keyword">virtual</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> <a class="code" href="class_gtransfo.html#a10">LinearApproximation</a>(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Where, 
00158                                             <font class="keyword">const</font> <font class="keywordtype">double</font> Step = 0.01) <font class="keyword">const</font>;
00159 
00160 
00161     ClassDef(<a class="code" href="class_gtransfoidentity.html">GtransfoIdentity</a>,1)
00162 };
00163 
00165 <font class="keywordtype">bool</font> <a class="code" href="gtransfo_h.html#a2">IsIdentity</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *a_transfo);
00166 
00167 <font class="keyword">class </font><a class="code" href="class_gtransfoquad.html">GtransfoQuad</a>;
00168 <font class="keyword">class </font><a class="code" href="class_gtransfocub.html">GtransfoCub</a>;
00169 
00170 <font class="comment">/*=============================================================*/</font>
<a name="l00172"></a><a class="code" href="class_gtransfolin.html">00172</a> <font class="keyword">class </font><a class="code" href="class_gtransfolin.html">GtransfoLin</a> : <font class="keyword">public</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> {
00173 
00174  <font class="keyword">public</font>:
<a name="l00176"></a><a class="code" href="class_gtransfolin.html#a0">00176</a>     <a class="code" href="class_gtransfolin.html#a0">GtransfoLin</a>()<font class="keyword"> </font>{identity();}
00177 
00179     <a class="code" href="class_gtransfolin.html">GtransfoLin</a>  <a class="code" href="class_gtransfolin.html#a1">operator*</a>(<font class="keyword">const</font>  <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;T2) <font class="keyword">const</font>;
00180 
00182     <a class="code" href="class_gtransfolin.html">GtransfoLin</a>  <a class="code" href="class_gtransfolin.html#a2">invert</a>() <font class="keyword">const</font>;
00183 
00185     <font class="keywordtype">void</font>  <a class="code" href="class_gtransfo.html#a1">apply</a>(<font class="keyword">const</font> <font class="keywordtype">double</font> Xin, <font class="keyword">const</font> <font class="keywordtype">double</font> Yin, <font class="keywordtype">double</font> &amp;Xout, <font class="keywordtype">double</font> &amp;Yout)<font class="keyword"> const</font>
00186 <font class="keyword">      </font>{
00187       Xout =  dx + a11*Xin + a12*Yin;
00188       Yout =  dy + a21*Xin + a22*Yin;
00189       }
00190 
00192     <font class="keywordtype">double</font> Determinant()<font class="keyword"> const </font>{<font class="keywordflow">return</font> (a11*a22-a12*a21);}
00193 
00194 
00195     <font class="comment">// useful?    double Jacobian(const double x, const double y) const { return Determinant();}</font>
00196 
00198     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a9">Derivative</a>(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Where, <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;Derivative, 
00199                     <font class="keyword">const</font> <font class="keywordtype">double</font> Step = 0.01) <font class="keyword">const</font>;
00201     <a class="code" href="class_gtransfolin.html">GtransfoLin</a> <a class="code" href="class_gtransfo.html#a10">LinearApproximation</a>(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Where, 
00202                                     <font class="keyword">const</font> <font class="keywordtype">double</font> step = 0.01) <font class="keyword">const</font>;
00203 
00204 
00205     <a class="code" href="class_point.html">Point</a> <a class="code" href="class_gtransfo.html#a1">apply</a>(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Pin)<font class="keyword"> const </font>
00206 <font class="keyword">        </font>{ <font class="keywordflow">return</font> Point(dx + a11*Pin.x + a12*Pin.y, dy + a21*Pin.x + a22*Pin.y);}
00207 
<a name="l00208"></a><a class="code" href="class_gtransfolin.html#a8">00208</a>     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a3">dump</a>(ostream &amp;stream = cout)<font class="keyword"> const </font>
00209 <font class="keyword">         </font>{ios::fmtflags  old_flags =  stream.flags(); 
00210            <font class="keywordtype">int</font> oldprec = stream.precision();
00211            stream &lt;&lt; resetiosflags(ios::scientific) ;
00212            stream &lt;&lt; setiosflags(ios::fixed) ;
00213            stream &lt;&lt; setprecision(8);
00214            stream &lt;&lt; <font class="stringliteral">" newx = "</font> &lt;&lt; dx ;
00215            stream &lt;&lt; <font class="stringliteral">" + "</font> &lt;&lt; a11 &lt;&lt; <font class="stringliteral">"*x + "</font> &lt;&lt; a12 &lt;&lt; <font class="stringliteral">"*y"</font> &lt;&lt; endl ;
00216            stream &lt;&lt; <font class="stringliteral">" newy = "</font> &lt;&lt; dy ;
00217            stream &lt;&lt; <font class="stringliteral">" + "</font> &lt;&lt; a21 &lt;&lt; <font class="stringliteral">"*x + "</font> &lt;&lt; a22 &lt;&lt; <font class="stringliteral">"*y"</font> &lt;&lt; endl ;
00218            stream &lt;&lt; <font class="stringliteral">" Determinant = "</font> &lt;&lt; Determinant() &lt;&lt; endl;
00219            stream.flags(old_flags);
00220            stream &lt;&lt; setprecision(oldprec) ;}
00221     <font class="keywordtype">double</font> <a class="code" href="class_gtransfo.html#a4">fit</a>(<font class="keyword">const</font> StarMatchList &amp;List, <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PriorTransfo = NULL , 
00222                <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PosteriorTransfo = NULL);
00223 
00224 
<a name="l00226"></a><a class="code" href="class_gtransfolin.html#a10">00226</a>     <a class="code" href="class_gtransfolin.html#a0">GtransfoLin</a>(<font class="keywordtype">double</font> ox, <font class="keywordtype">double</font> oy , <font class="keywordtype">double</font> aa11, <font class="keywordtype">double</font> aa12, <font class="keywordtype">double</font> aa21, <font class="keywordtype">double</font> aa22) :
00227         dx(ox), dy(oy), a11(aa11), a12(aa12), a21(aa21), a22(aa22) {}
00228 
<a name="l00230"></a><a class="code" href="class_gtransfolin.html#a11">00230</a>     <a class="code" href="class_gtransfolin.html#a0">GtransfoLin</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfoidentity.html">GtransfoIdentity</a> &amp;T)<font class="keyword"></font>
00231 <font class="keyword">        </font>{ <font class="keywordflow">if</font> (&amp;T) {} <font class="comment">/* avoid a warning */</font> identity();}
00232 
00233 
00234     <font class="keyword">friend</font> <a class="code" href="class_gtransfocub.html">GtransfoCub</a> <a class="code" href="class_gtransfolin.html#a1">operator*</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;L, <font class="keyword">const</font> <a class="code" href="class_gtransfocub.html">GtransfoCub</a> &amp;R);
00235 
00236     <font class="keyword">friend</font> <a class="code" href="class_gtransfocub.html">GtransfoCub</a> <a class="code" href="class_gtransfolin.html#a1">operator*</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfocub.html">GtransfoCub</a> &amp;L, <font class="keyword">const</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;R);
00237 
<a name="l00238"></a><a class="code" href="class_gtransfolin.html#a12">00238</a>     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a7">Clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_gtransfolin.html#a0">GtransfoLin</a>(*<font class="keyword">this</font>);}
00239 
00240     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a6">ReduceCompo</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *Right) <font class="keyword">const</font>;
00241 
00242     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a12">InverseTransfo</a>(<font class="keyword">const</font> <font class="keywordtype">double</font> Precision,
00243                              <font class="keyword">const</font> <a class="code" href="class_frame.html">Frame</a>&amp; Region) <font class="keyword">const</font>;
00244 
00245     <font class="keywordtype">double</font>  A11()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a11;};
00246     <font class="keywordtype">double</font> A12()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a12;};
00247     <font class="keywordtype">double</font> A21()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a21;};
00248     <font class="keywordtype">double</font> A22()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a22;};
00249     <font class="keywordtype">double</font> dX()  <font class="keyword">const</font> { <font class="keywordflow">return</font> dx ;};
00250     <font class="keywordtype">double</font> dY()  <font class="keyword">const</font> { <font class="keywordflow">return</font> dy ;};
<a name="l00251"></a><a class="code" href="class_gtransfolin.html#a21">00251</a>     <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_gtransfo.html#a14">Npar</a>()<font class="keyword"> const </font>{<font class="keywordflow">return</font> 6;}
00252 
00253     <font class="keyword">virtual</font> <font class="keywordtype">int</font> Degree()<font class="keyword"> const </font>{<font class="keywordflow">return</font> 1;}
00254 
00255     <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="class_gtransfo.html">Gtransfo</a>;
00256     <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="class_gtransfoidentity.html">GtransfoIdentity</a>; <font class="comment">// for Gtransfo::Derivative</font>
00257 
00258  <font class="keyword">protected</font>:
00259     <font class="keywordtype">double</font>  dx,dy;
00260     <font class="keywordtype">double</font> a11,a12,a21,a22;
00261 
00262     <font class="keywordtype">void</font> identity()<font class="keyword"> </font>{dx=dy=a12=a21=0; a11=a22=1.;}
00263 
00264  <font class="keyword">private</font>:
00265     <font class="keywordtype">int</font> do_the_fit(<font class="keywordtype">double</font> &amp;Chi2, <font class="keyword">const</font> StarMatchList &amp;List, 
00266                    <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PriorTransfo = NULL, 
00267                    <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a>* PosteriorTransfo = NULL);
00268 
00269     ClassDef(<a class="code" href="class_gtransfolin.html">GtransfoLin</a>,1)
00270 };
00271 
00272 
00273 <font class="comment">/*=============================================================*/</font>
<a name="l00275"></a><a class="code" href="class_gtransfolinshift.html">00275</a> <font class="keyword">class </font><a class="code" href="class_gtransfolinshift.html">GtransfoLinShift</a> : <font class="keyword">public</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a>
00276 {
00277 
00278  <font class="keyword">public</font>:
<a name="l00280"></a><a class="code" href="class_gtransfolinshift.html#a0">00280</a>     <a class="code" href="class_gtransfolinshift.html#a0">GtransfoLinShift</a>(<font class="keywordtype">double</font> ox =0., <font class="keywordtype">double</font> oy =0.) : <a class="code" href="class_gtransfolin.html">GtransfoLin</a>(ox,oy,1.,0.,0.,1.) {}
00281     <a class="code" href="class_gtransfolinshift.html#a0">GtransfoLinShift</a>( <font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;P) : <a class="code" href="class_gtransfolin.html">GtransfoLin</a>(P.x, P.y, 1., 0. ,0. ,1.) {};
00282     <font class="keywordtype">double</font> <a class="code" href="class_gtransfo.html#a4">fit</a>(<font class="keyword">const</font> StarMatchList &amp;List, <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PriorTransfo = NULL , 
00283                <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PosteriorTransfo = NULL);
<a name="l00284"></a><a class="code" href="class_gtransfolinshift.html#a3">00284</a>     <font class="keywordtype">int</font> <a class="code" href="class_gtransfo.html#a14">Npar</a>()<font class="keyword"> const </font>{<font class="keywordflow">return</font> 2;}
00285 };
00286 
00287 <font class="comment">/*=============================================================*/</font>
<a name="l00289"></a><a class="code" href="class_gtransfolinrot.html">00289</a> <font class="keyword">class </font><a class="code" href="class_gtransfolinrot.html">GtransfoLinRot</a> : <font class="keyword">public</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> {
00290 
00291  <font class="keyword">public</font>: 
00292     GtransfoLinRot() : <a class="code" href="class_gtransfolin.html#a0">GtransfoLin</a>()<font class="keyword"> </font>{};
00293     GtransfoLinRot(<font class="keyword">const</font> <font class="keywordtype">double</font> AngleRad, <font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> *Center=NULL, 
00294                    <font class="keyword">const</font> <font class="keywordtype">double</font> ScaleFactor=1.0);
00295     <font class="keywordtype">double</font> <a class="code" href="class_gtransfo.html#a4">fit</a>(<font class="keyword">const</font> StarMatchList &amp;List, <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PriorTransfo = NULL , 
00296               <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PosteriorTransfo = NULL);
<a name="l00297"></a><a class="code" href="class_gtransfolinrot.html#a3">00297</a>     <font class="keywordtype">int</font> <a class="code" href="class_gtransfo.html#a14">Npar</a>()<font class="keyword"> const </font>{<font class="keywordflow">return</font> 4;}
00298 };
00299 
00300 
00301 <font class="comment">/*=============================================================*/</font>
00302 
<a name="l00304"></a><a class="code" href="class_gtransfolinscale.html">00304</a> <font class="keyword">class </font><a class="code" href="class_gtransfolinscale.html">GtransfoLinScale</a> :  <font class="keyword">public</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> {
00305 
00306  <font class="keyword">public</font>: 
00308     GtransfoLinScale(<font class="keyword">const</font> <font class="keywordtype">double</font> Scale) : <a class="code" href="class_gtransfolin.html#a0">GtransfoLin</a>(0.0, 0.0, Scale, 0.,0.,Scale)<font class="keyword"> </font>{};
00310     GtransfoLinScale(<font class="keyword">const</font> <font class="keywordtype">double</font> ScaleX, <font class="keyword">const</font> <font class="keywordtype">double</font> ScaleY) : 
00311         <a class="code" href="class_gtransfolin.html#a0">GtransfoLin</a>(0.0, 0.0, ScaleX, 0.,0.,ScaleY)<font class="keyword"> </font>{};    
00312 
<a name="l00313"></a><a class="code" href="class_gtransfolinscale.html#a2">00313</a>     <font class="keywordtype">int</font> <a class="code" href="class_gtransfo.html#a14">Npar</a>()<font class="keyword"> const </font>{<font class="keywordflow">return</font> 2;}
00314 };
00315 
00316 
00317 <font class="comment">/*=============================================================*/</font>
00318 
00320 
00321 <font class="comment">/* Maybe it seems convenient to make it inherit from </font>
00322 <font class="comment">   GtransfoLin, but for quite a few methods (InverseTransfo,</font>
00323 <font class="comment">   Derivative, LinearApproximation), GtransfoQuad</font>
00324 <font class="comment">   should not resort to the GtransfoLin ones ! </font>
00325 <font class="comment">*/</font>
<a name="l00326"></a><a class="code" href="class_gtransfoquad.html">00326</a> <font class="keyword">class </font><a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> : <font class="keyword">public</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> {
00327 
00328 <font class="keyword">public</font> :
<a name="l00330"></a><a class="code" href="class_gtransfoquad.html#a0">00330</a>     <a class="code" href="class_gtransfoquad.html#a0">GtransfoQuad</a>()<font class="keyword"> </font>{identity();}
00331 
00333     <a class="code" href="class_gtransfoquad.html#a0">GtransfoQuad</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp; Lin);
00334 
00336     <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> <a class="code" href="class_gtransfolin.html#a1">operator*</a>(<font class="keyword">const</font>  <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;R) <font class="keyword">const</font>;
00337 
00338     <font class="keywordtype">void</font>  <a class="code" href="class_gtransfo.html#a1">apply</a>(<font class="keyword">const</font> <font class="keywordtype">double</font> Xin, <font class="keyword">const</font> <font class="keywordtype">double</font> Yin, <font class="keywordtype">double</font> &amp;Xout, <font class="keywordtype">double</font> &amp;Yout)<font class="keyword"> const</font>
00339 <font class="keyword">        </font>{
00340             Xout  =  x_tr(Xin,Yin);
00341             Yout =  y_tr(Xin,Yin);
00342         }
00343 
00344     <font class="comment">//void dump(ostream &amp;stream = cout) const ;</font>
00345 
00346     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a3">dump</a>(ostream &amp;stream = cout) <font class="keyword">const</font>;
00347 
00348     <font class="keywordtype">double</font> <a class="code" href="class_gtransfo.html#a4">fit</a>(<font class="keyword">const</font> StarMatchList &amp;List, <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PriorTransfo = NULL , 
00349                <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PosteriorTransfo = NULL);
00350 
00351 
<a name="l00352"></a><a class="code" href="class_gtransfoquad.html#a6">00352</a>     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a7">Clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_gtransfoquad.html#a0">GtransfoQuad</a>(*<font class="keyword">this</font>);}
00353     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a6">ReduceCompo</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *Right) <font class="keyword">const</font>;
00354     
00355     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a12">InverseTransfo</a>(<font class="keyword">const</font> <font class="keywordtype">double</font> Precision,
00356                              <font class="keyword">const</font> <a class="code" href="class_frame.html">Frame</a>&amp; Region) <font class="keyword">const</font>;
00357     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a9">Derivative</a>(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Where, <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;Derivative, 
00358                     <font class="keyword">const</font> <font class="keywordtype">double</font> Step = 0.01) <font class="keyword">const</font>;
00359     
00360     <a class="code" href="class_gtransfolin.html">GtransfoLin</a> <a class="code" href="class_gtransfo.html#a10">LinearApproximation</a>(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Where, 
00361                                     <font class="keyword">const</font> <font class="keywordtype">double</font> step = 0.01) <font class="keyword">const</font>;
00362     
00363     <font class="keywordtype">double</font> A1X2()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a1x2;};
00364     <font class="keywordtype">double</font> A1XY()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a1xy;};
00365     <font class="keywordtype">double</font> A1Y2()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a1y2;};
00366     <font class="keywordtype">double</font> A2X2()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a2x2;};
00367     <font class="keywordtype">double</font> A2XY()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a2xy;};
00368     <font class="keywordtype">double</font> A2Y2()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a2y2;};
<a name="l00369"></a><a class="code" href="class_gtransfoquad.html#a17">00369</a>     <font class="keywordtype">int</font> <a class="code" href="class_gtransfo.html#a14">Npar</a>()<font class="keyword"> const </font>{<font class="keywordflow">return</font> 12;}
00370 
00371     <font class="keyword">virtual</font> <font class="keywordtype">int</font> Degree()<font class="keyword"> const </font>{<font class="keywordflow">return</font> 2;}
00372 
00373  <font class="keyword">protected</font>:
00374     <font class="keywordtype">double</font> a1x2,a1xy,a1y2,a2x2,a2xy,a2y2;
00375 
00376     <font class="keywordtype">void</font> identity()<font class="keyword"> </font>{dx=dy=a12=a21=a1x2=a1xy=a1y2=a2x2=a2xy=a2y2=0; a11=a22=1.;}
00377 
00378  <font class="keyword">public</font>: 
00379 
00380   <font class="comment">/* the constructor that enables to set all parameters independently. Not very useful. */</font>
00381     <a class="code" href="class_gtransfoquad.html#a0">GtransfoQuad</a>(<font class="keywordtype">double</font> ox, <font class="keywordtype">double</font> oy , <font class="keywordtype">double</font> aa11, <font class="keywordtype">double</font> aa12, <font class="keywordtype">double</font> aa21, 
00382                  <font class="keywordtype">double</font> aa22,<font class="keywordtype">double</font> aa1x2, <font class="keywordtype">double</font> aa1xy, <font class="keywordtype">double</font> aa1y2,<font class="keywordtype">double</font> aa2x2,
00383                  <font class="keywordtype">double</font> aa2xy,<font class="keywordtype">double</font> aa2y2) :
00384         <a class="code" href="class_gtransfolin.html">GtransfoLin</a>(ox,oy,aa11,aa12,aa21,aa22),
00385         a1x2(aa1x2), a1xy(aa1xy), a1y2(aa1y2), 
00386         a2x2(aa2x2), a2xy(aa2xy), a2y2(aa2y2) {}
00387 
00388     <font class="keyword">friend</font> <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> <a class="code" href="class_gtransfolin.html#a1">operator*</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;L, <font class="keyword">const</font> <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> &amp;R);
00389 
00390 <font class="keyword">private</font>:
00391     <font class="keywordtype">double</font> x_tr(<font class="keyword">const</font> <font class="keywordtype">double</font> Xin, <font class="keyword">const</font> <font class="keywordtype">double</font> Yin)<font class="keyword"> const </font>
00392 <font class="keyword">        </font>{ <font class="keywordflow">return</font>  dx + a11*Xin + a12*Yin + a1x2*Xin*Xin + a1xy*Xin*Yin + a1y2*Yin*Yin;}
00393     <font class="keywordtype">double</font> y_tr(<font class="keyword">const</font> <font class="keywordtype">double</font> Xin, <font class="keyword">const</font> <font class="keywordtype">double</font> Yin)<font class="keyword"> const </font>
00394 <font class="keyword">        </font>{ <font class="keywordflow">return</font>  dy + a21*Xin + a22*Yin + a2x2*Xin*Xin + a2xy*Xin*Yin + a2y2*Yin*Yin;}
00395     <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> truncated_product(<font class="keyword">const</font> <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> &amp;R) <font class="keyword">const</font>;  
00396     ClassDef(<a class="code" href="class_gtransfoquad.html">GtransfoQuad</a>,1);
00397 };
00398 
00399 <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> operator*(<font class="keyword">const</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;L, <font class="keyword">const</font> <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> &amp;R);
00400 
00401 <font class="comment">/*=============================================================*/</font>
<a name="l00403"></a><a class="code" href="struct_namedvalue.html">00403</a> <font class="keyword">struct </font><a class="code" href="struct_namedvalue.html">NamedValue</a> {
00404   string name;
00405   <font class="keywordtype">double</font> value;
00406   NamedValue(<font class="keyword">const</font> string &amp;a_name, <font class="keyword">const</font> <font class="keywordtype">double</font> a_value) : name(a_name), value(a_value)<font class="keyword"> </font>{};
00407 };
00408 
00409 
00410 <font class="preprocessor">#ifndef __CINT__</font>
00411 <font class="preprocessor"></font><font class="preprocessor">#include &lt;vector&gt;</font>
00412 <font class="preprocessor">#endif </font><font class="comment">/*__CINT__ */</font>
00413 
00414 
00415 <font class="comment">/* GtransfoCub*/</font>
00416 
<a name="l00418"></a><a class="code" href="class_gtransfocub.html">00418</a> <font class="keyword">class </font><a class="code" href="class_gtransfocub.html">GtransfoCub</a> : <font class="keyword">public</font> <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> {
00419 
00420  <font class="keyword">public</font>:
<a name="l00422"></a><a class="code" href="class_gtransfocub.html#a0">00422</a>     <a class="code" href="class_gtransfocub.html#a0">GtransfoCub</a>()<font class="keyword"> </font>{identity();}
00423     
00425     <a class="code" href="class_gtransfocub.html#a0">GtransfoCub</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp; Lin);
00426     
00428     <a class="code" href="class_gtransfocub.html#a0">GtransfoCub</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> &amp; Quad);
00429 
00431     <font class="keyword">friend</font> <a class="code" href="class_gtransfocub.html">GtransfoCub</a> <a class="code" href="class_gtransfolin.html#a1">operator*</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfocub.html">GtransfoCub</a> &amp;L, <font class="keyword">const</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;R);
00432 
00434     <font class="keyword">friend</font> <a class="code" href="class_gtransfocub.html">GtransfoCub</a> <a class="code" href="class_gtransfolin.html#a1">operator*</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;L, <font class="keyword">const</font> <a class="code" href="class_gtransfocub.html">GtransfoCub</a> &amp;R);
00435 
00436     <font class="keywordtype">void</font>  <a class="code" href="class_gtransfo.html#a1">apply</a>(<font class="keyword">const</font> <font class="keywordtype">double</font> Xin, <font class="keyword">const</font> <font class="keywordtype">double</font> Yin, <font class="keywordtype">double</font> &amp;Xout, <font class="keywordtype">double</font> &amp;Yout)<font class="keyword"> const</font>
00437 <font class="keyword">        </font>{
00438             Xout =  x_tr3(Xin,Yin);
00439             Yout =  y_tr3(Xin,Yin);
00440         }
00441 
00442     <a class="code" href="class_point.html">Point</a> <a class="code" href="class_gtransfo.html#a1">apply</a>(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Pin)<font class="keyword"></font>
00443 <font class="keyword">        </font>{ <font class="keywordflow">return</font> Point(x_tr3(Pin.x,Pin.y), y_tr3(Pin.x,Pin.y));}
00444 
00445     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a3">dump</a>(ostream &amp;stream = cout) <font class="keyword">const</font>;
00446 
00449     <font class="keywordtype">double</font> <a class="code" href="class_gtransfo.html#a4">fit</a>(<font class="keyword">const</font> StarMatchList &amp;List, <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PriorTransfo = NULL, 
00450               <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PosteriorTransfo = NULL);
<a name="l00452"></a><a class="code" href="class_gtransfocub.html#a7">00452</a>     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a7">Clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_gtransfocub.html#a0">GtransfoCub</a>(*<font class="keyword">this</font>);}
00453     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a6">ReduceCompo</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *Right) <font class="keyword">const</font>;
00454 
00455 <font class="preprocessor">#ifndef __CINT__    </font>
00456 <font class="preprocessor"></font>    
00457     <font class="keywordtype">double</font> dX()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> dx ;};
00458     <font class="keywordtype">double</font> dY()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> dy ;}; 
00459 
00460     <font class="keywordtype">double</font> A11()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a11;};
00461     <font class="keywordtype">double</font> A12()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a12;};
00462     <font class="keywordtype">double</font> A21()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a21;};
00463     <font class="keywordtype">double</font> A22()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a22;};
00464 
00465     <font class="keywordtype">double</font> A1X2()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a1x2;};
00466     <font class="keywordtype">double</font> A1XY()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a1xy;};
00467     <font class="keywordtype">double</font> A1Y2()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a1y2;};
00468     <font class="keywordtype">double</font> A2X2()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a2x2;};
00469     <font class="keywordtype">double</font> A2XY()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a2xy;};
00470     <font class="keywordtype">double</font> A2Y2()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a2y2;};
00471 
00472     <font class="keywordtype">double</font> A1X3()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a1x3;};
00473     <font class="keywordtype">double</font> A1X2Y()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a1x2y;};
00474     <font class="keywordtype">double</font> A1XY2()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a1xy2;};
00475     <font class="keywordtype">double</font> A1Y3()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a1y3;};
00476     <font class="keywordtype">double</font> A2X3()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a2x3;};
00477     <font class="keywordtype">double</font> A2X2Y()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a2x2y;};
00478     <font class="keywordtype">double</font> A2XY2()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a2xy2;};
00479     <font class="keywordtype">double</font> A2Y3()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> a2y3;};
00480 
00481     <font class="keyword">typedef</font> <font class="keyword">enum</font> {Old, New} OldOrNew;
00482     <font class="keywordtype">void</font> GetValues(vector&lt;NamedValue&gt; &amp;Values, <font class="keyword">const</font> OldOrNew WhichNames = New) <font class="keyword">const</font>;
00483     <font class="keywordtype">void</font> SetValues(vector&lt;NamedValue&gt; &amp;Values);
<a name="l00484"></a><a class="code" href="class_gtransfocub.html#a31">00484</a>     <font class="keywordtype">int</font> <a class="code" href="class_gtransfo.html#a14">Npar</a>()<font class="keyword"> const </font>{<font class="keywordflow">return</font> 20;}
00485 
00486     <font class="keyword">virtual</font> <font class="keywordtype">int</font> Degree()<font class="keyword"> const </font>{<font class="keywordflow">return</font> 3;}
00487 
00488 <font class="preprocessor">#endif </font><font class="comment">/* __CINT __ */</font>
00489 
00490 <font class="keyword">protected</font>:
00491     <font class="comment">//    double dx,dy; //2</font>
00492     <font class="comment">//    double a11,a12,a21,a22; //4 </font>
00493     <font class="comment">//    double a1x2,a1xy,a1y2,a2x2,a2xy,a2y2; //6</font>
00494     <font class="keywordtype">double</font> a1x3,a1x2y,a1xy2,a1y3,a2x3,a2x2y,a2xy2,a2y3; <font class="comment">//8</font>
00495 
00496     <font class="keywordtype">void</font> identity()<font class="keyword"> </font>{dx=dy=a12=a21=a1x2=a1xy=a1y2=a2x2=a2xy=a2y2=
00497                          a1x3=a1x2y=a1xy2=a1y3=a2x3=a2x2y=a2xy2=a2y3=0; a11=a22=1.;}
00498 
00499 
00500 <font class="keyword">private</font>:
00501 
00502 <font class="preprocessor">#ifndef __CINT__</font>
00503 <font class="preprocessor"></font>  <font class="comment">// arrays used to associate names to class data members once for all.</font>
00504     <font class="keyword">typedef</font> <font class="keywordtype">double</font> <a class="code" href="class_gtransfocub.html">GtransfoCub</a>::*GtransfoCubItem;
00505     <font class="keyword">typedef</font> <font class="keyword">struct </font>{ <font class="keyword">const</font> <font class="keywordtype">char</font> *name; GtransfoCubItem value; }  CubAssoc;
00506     <font class="keyword">static</font> CubAssoc GtransfoCubNames [];
00507     <font class="keyword">static</font> CubAssoc GtransfoCubOldNames [];
00508 <font class="preprocessor">#endif </font><font class="comment">/* __CINT __ */</font>
00509 
00510     <font class="keywordtype">double</font> x_tr3(<font class="keyword">const</font> <font class="keywordtype">double</font> Xin, <font class="keyword">const</font> <font class="keywordtype">double</font> Yin)<font class="keyword"> const </font>
00511 <font class="keyword">        </font>{ <font class="keywordflow">return</font>  dx + a11*Xin + a12*Yin + a1x2*Xin*Xin + a1xy*Xin*Yin + a1y2*Yin*Yin +
00512               a1x3*Xin*Xin*Xin + a1x2y*Xin*Xin*Yin + a1xy2*Xin*Yin*Yin + 
00513               a1y3*Yin*Yin*Yin;}
00514 
00515     <font class="keywordtype">double</font> y_tr3(<font class="keyword">const</font> <font class="keywordtype">double</font> Xin, <font class="keyword">const</font> <font class="keywordtype">double</font> Yin)<font class="keyword"> const </font>
00516 <font class="keyword">        </font>{ <font class="keywordflow">return</font>  dy + a21*Xin + a22*Yin + a2x2*Xin*Xin + a2xy*Xin*Yin + a2y2*Yin*Yin +
00517               a2x3*Xin*Xin*Xin + a2x2y*Xin*Xin*Yin + a2xy2*Xin*Yin*Yin + 
00518               a2y3*Yin*Yin*Yin;} 
00519 
00520   ClassDef(<a class="code" href="class_gtransfocub.html">GtransfoCub</a>,1);
00521 
00522 };
00523 
00524 <font class="comment">/*====================================================================*/</font>
00525 
00526 <font class="keyword">class </font><a class="code" href="class_tanradec2pix.html">TanRaDec2Pix</a>; <font class="comment">// the inverse of TanPix2RaDec.</font>
00527 
<a name="l00529"></a><a class="code" href="class_tanpix2radec.html">00529</a> <font class="keyword">class </font><a class="code" href="class_tanpix2radec.html">TanPix2RaDec</a> : <font class="keyword">public</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> {
00530 
00531  <font class="keyword">private</font>:
00532     <a class="code" href="class_gtransfolin.html">GtransfoLin</a> linPix2Tan; <font class="comment">// pixels to tangent plane (internally in radians)</font>
00533     <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> *corr;
00534     <font class="keywordtype">double</font> ra0, dec0; <font class="comment">// in radians</font>
00535     <font class="keywordtype">double</font> cos0, sin0; <font class="comment">// cos(dec0), sin(dec0) </font>
00536   
00537  <font class="keyword">public</font>:
00539     <a class="code" href="class_tanpix2radec.html#a0">TanPix2RaDec</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;Pix2Tan, <font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;TangentPoint, 
00540                  <font class="keyword">const</font> <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a>* Corrections = NULL);
00541 
00542     <a class="code" href="class_tanpix2radec.html#a0">TanPix2RaDec</a>(<font class="keyword">const</font> <a class="code" href="class_tanpix2radec.html">TanPix2RaDec</a> &amp;Original);
00543     
00544     <font class="keywordtype">void</font> operator = (<font class="keyword">const</font> <a class="code" href="class_tanpix2radec.html">TanPix2RaDec</a> &amp;);
00545     
00546     <a class="code" href="class_tanpix2radec.html#a0">TanPix2RaDec</a>();
00547 
00548     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a1">apply</a>(<font class="keyword">const</font> <font class="keywordtype">double</font> Xin, <font class="keyword">const</font> <font class="keywordtype">double</font> Yin, 
00549                <font class="keywordtype">double</font> &amp;Xout, <font class="keywordtype">double</font> &amp;Yout) <font class="keyword">const</font>;
00550 
00551     <a class="code" href="class_point.html">Point</a> <a class="code" href="class_gtransfo.html#a1">apply</a>(<font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;Pin)<font class="keyword"> const </font>
00552 <font class="keyword">        </font>{<font class="keywordtype">double</font> xout, yout; <a class="code" href="class_gtransfo.html#a1">apply</a>(Pin.x, Pin.y, xout,yout); <font class="keywordflow">return</font> Point(xout,yout);}
00553 
00555     <a class="code" href="class_tanpix2radec.html">TanPix2RaDec</a> <a class="code" href="class_gtransfolin.html#a1">operator *</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;Right);
00556 
00558     <a class="code" href="class_tanradec2pix.html">TanRaDec2Pix</a> <a class="code" href="class_gtransfolin.html#a2">invert</a>() <font class="keyword">const</font>;
00559 
00561     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a13">RoughInverse</a>(<font class="keyword">const</font> <a class="code" href="class_frame.html">Frame</a> &amp;Region) <font class="keyword">const</font>;
00562 
00564     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a12">InverseTransfo</a>(<font class="keyword">const</font> <font class="keywordtype">double</font> Precision,
00565                              <font class="keyword">const</font> <a class="code" href="class_frame.html">Frame</a>&amp; Region) <font class="keyword">const</font>;
00566 
00567 
00569     <font class="keywordtype">void</font> <a class="code" href="class_tanpix2radec.html#a10">SetCorrections</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a> *Corrections);
00570     
00571     <a class="code" href="class_gtransfo.html">Gtransfo</a> *<a class="code" href="class_gtransfo.html#a7">Clone</a>() <font class="keyword">const</font>;
00572 
00573     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a3">dump</a>(ostream &amp;stream) <font class="keyword">const</font>;
00574 
00576     <a class="code" href="class_point.html">Point</a> <a class="code" href="class_tanpix2radec.html#a13">TangentPoint</a>() <font class="keyword">const</font>;
00577 
00579     <a class="code" href="class_gtransfolin.html">GtransfoLin</a> <a class="code" href="class_tanpix2radec.html#a14">LinPart</a>() <font class="keyword">const</font>;
00580 
00582     <font class="keyword">const</font> <a class="code" href="class_gtransfoquad.html">GtransfoQuad</a>* <a class="code" href="class_tanpix2radec.html#a15">Corr</a>() <font class="keyword">const</font>; 
00583 
00585     <a class="code" href="class_point.html">Point</a> <a class="code" href="class_tanpix2radec.html#a16">CrPix</a>() <font class="keyword">const</font>;
00586 
00588     <font class="keywordtype">double</font> <a class="code" href="class_gtransfo.html#a4">fit</a>(<font class="keyword">const</font> StarMatchList &amp;List, <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PriorTransfo = NULL ,
00589                <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PosteriorTransfo = NULL);
00590 
00591     ~TanPix2RaDec();
00592 
00593 };
00594 
00596 
<a name="l00602"></a><a class="code" href="class_tanradec2pix.html">00602</a> <font class="keyword">class </font><a class="code" href="class_tanradec2pix.html">TanRaDec2Pix</a> : <font class="keyword">public</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> 
00603 {
00604  <font class="keyword">private</font>:
00605     <font class="keywordtype">double</font> ra0, dec0; <font class="comment">//tangent point (internally in radians)</font>
00606     <font class="keywordtype">double</font> cos0,sin0;
00607     <a class="code" href="class_gtransfolin.html">GtransfoLin</a> linTan2Pix; <font class="comment">// tangent plane to pixels (internally in radians)</font>
00608 
00609  <font class="keyword">public</font>:
00611     <a class="code" href="class_tanradec2pix.html#a0">TanRaDec2Pix</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfolin.html">GtransfoLin</a> &amp;Tan2Pix, <font class="keyword">const</font> <a class="code" href="class_point.html">Point</a> &amp;TangentPoint);
00612     
00614     <a class="code" href="class_tanradec2pix.html#a0">TanRaDec2Pix</a>();
00615 
00617     <a class="code" href="class_gtransfolin.html">GtransfoLin</a> <a class="code" href="class_tanradec2pix.html#a2">LinPart</a>() <font class="keyword">const</font>;
00618 
00620     <a class="code" href="class_point.html">Point</a> <a class="code" href="class_tanradec2pix.html#a3">TangentPoint</a>() <font class="keyword">const</font>;
00621 
00623     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a1">apply</a>(<font class="keyword">const</font> <font class="keywordtype">double</font> Xin, <font class="keyword">const</font> <font class="keywordtype">double</font> Yin, <font class="keywordtype">double</font> &amp;Yout, <font class="keywordtype">double</font> &amp;Yout) <font class="keyword">const</font>;
00624 
00626     <a class="code" href="class_tanpix2radec.html">TanPix2RaDec</a> <a class="code" href="class_gtransfolin.html#a2">invert</a>() <font class="keyword">const</font>;
00627 
00629     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a13">RoughInverse</a>(<font class="keyword">const</font> <a class="code" href="class_frame.html">Frame</a> &amp;Region) <font class="keyword">const</font>;
00630 
00632     <a class="code" href="class_gtransfo.html">Gtransfo</a>* <a class="code" href="class_gtransfo.html#a12">InverseTransfo</a>(<font class="keyword">const</font> <font class="keywordtype">double</font> Precision,
00633                            <font class="keyword">const</font> <a class="code" href="class_frame.html">Frame</a>&amp; Region) <font class="keyword">const</font>;
00634 
00635     <font class="keywordtype">void</font> <a class="code" href="class_gtransfo.html#a3">dump</a>(ostream &amp;stream) <font class="keyword">const</font>;
00636 
00637     <a class="code" href="class_gtransfo.html">Gtransfo</a> * <a class="code" href="class_gtransfo.html#a7">Clone</a>() <font class="keyword">const</font>; 
00638 
00639     <font class="keywordtype">double</font> <a class="code" href="class_gtransfo.html#a4">fit</a>(<font class="keyword">const</font> StarMatchList &amp;List, <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PriorTransfo = NULL ,
00640              <font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a> *PosteriorTransfo = NULL);
00641 
00642 };
00643 
00645 <a class="code" href="class_gtransfolin.html">GtransfoLin</a> *<a class="code" href="gtransfo_h.html#a4">GtransfoToLin</a>(<font class="keyword">const</font> <a class="code" href="class_gtransfo.html">Gtransfo</a>* transfo);
00646 
00647 <font class="preprocessor">#ifdef __CINT__</font>
00648 <font class="preprocessor"></font><font class="preprocessor">#include "gtransfocomposition.h"</font>
00649 <font class="preprocessor">#endif </font><font class="comment">/* __CINT__ */</font>
00650 
00651 <font class="preprocessor">#endif </font><font class="comment">/* GTRANSFO__H */</font>
</pre></div><hr><address><small>Generated at Sun Feb 8 18:22:49 2004 for toads by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
