<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>imagesum.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; <a class="qindexRef" doxygen="_cgi:http://ici.la.bas/toto/tata/search.cgi" href="http://ici.la.bas/toto/tata/search.cgi">Search</a> &nbsp; </center>
<hr><h1>imagesum.h</h1><div class="fragment"><pre>00001 <font class="comment">// This may look like C code, but it is really -*- C++ -*-</font>
00002 <font class="preprocessor">#ifndef IMAGESUM__H</font>
00003 <font class="preprocessor"></font><font class="preprocessor">#define IMAGESUM__H</font>
00004 <font class="preprocessor"></font>
00005 
00006 <font class="comment">/* </font>
00007 <font class="comment"></font>
00008 <font class="comment">this is in principle not more than an image with the information needed</font>
00009 <font class="comment">to sum it with other images </font>
00010 <font class="comment"></font>
00011 <font class="comment">*/</font>
00012 
00013 <font class="preprocessor">#include &lt;vector&gt;</font>
00014 <font class="preprocessor">#include &lt;string&gt;</font>
00015 <font class="preprocessor">#include "reducedimage.h"</font>
00016 
00017 <font class="keyword">enum</font> StackingMethod { WeightedAverage = 1, 
00018                       ClippedWeightedAverage = 2, 
00019                       Median = 3,
00020                       SUnSet = 4};
00021 
00022 <font class="keyword">enum</font> WeightingMethod { PointSourceOptimal = 1, 
00023                        ExtendedSourceOptimal = 2, 
00024                        NoGlobalWeighting = 3, <font class="comment">//Local weights used, global=1</font>
00025                        NoWeightsAtAll = 4, <font class="comment">//Local and global weights ignored</font>
00026                        WUnSet = 5};
00027 
00028 string name_of_stackingMethod(<font class="keyword">const</font> StackingMethod stackingMethod);
00029 string name_of_weightingMethod(<font class="keyword">const</font> WeightingMethod weightingMethod);
00030 
00031 <font class="keyword">class </font><a class="code" href="class_fitsheader.html">FitsHeader</a>;
00032 
00033 
<a name="l00035"></a><a class="code" href="class_component.html">00035</a> <font class="keyword">class </font><a class="code" href="class_component.html">Component</a> {
00036 <font class="keyword">public</font> :
00037   <font class="keywordtype">double</font> backVar; <font class="comment">// sigma^2(back)</font>
00038   <font class="keywordtype">double</font> seeing;
00039   <font class="keywordtype">double</font> photomRatio; <font class="comment">// (this image) / (photometric reference)</font>
00040   <font class="keywordtype">double</font> globalWeight;
00041   <font class="keywordtype">double</font> averageWeight; <font class="comment">// used only to weight the various header words.</font>
00042   <font class="keywordtype">bool</font> hasWeight, hasDead, hasSatur, hasCosmic;
00043   string reducedImageName;
00044   <a class="code" href="class_countedref.html">ReducedImageRef</a> Ri; 
00045   
00046   <a class="code" href="class_component.html#a0">Component</a>(<a class="code" href="class_reducedimage.html">ReducedImage</a> *RI, <font class="keyword">const</font> <font class="keywordtype">double</font> &amp;PhotomRatio, 
00047             <font class="keyword">const</font> WeightingMethod weightingMethod);
00048   
00049   
00050   <font class="comment">//typedef vector&lt;Component&gt;::iterator ComponentIterator;</font>
00051   <font class="comment">//typedef vector&lt;Component&gt;::const_iterator ComponentCIterator;</font>
00052   <font class="keywordtype">void</font> dump(ostream&amp; s = cout) <font class="keyword">const</font>;
00053 
00054   ~Component();
00055 <font class="keyword">private</font>:
00056   <font class="keywordtype">void</font> SetGlobalWeights(<font class="keyword">const</font> WeightingMethod weightingMethod);
00057 };
00058 
00059 
00060 
00062 <font class="comment">//ImagesAlignAndSum()</font>
<a name="l00067"></a><a class="code" href="class_imagesum.html">00067</a> <font class="comment"></font><font class="keyword">class </font><a class="code" href="class_imagesum.html">ImageSum</a> : <font class="keyword">public</font> <a class="code" href="class_reducedimage.html">ReducedImage</a> {
00068    <font class="keywordtype">void</font> init();
00069 <font class="keyword">private</font>:
00070 
00071   vector&lt;Component&gt; components;
00072   StackingMethod stackingMethod;
00073   WeightingMethod weightingMethod;
00074  
00075  <font class="keywordtype">double</font> zero_point_ref;
00076 
00077   <font class="keywordtype">double</font> totalWeight;
00078   <font class="keywordtype">double</font> seeing;
00079   <font class="keywordtype">double</font> backLevel;
00080   <font class="keywordtype">double</font> sigmaBack;
00081   <font class="keywordtype">double</font> saturation;
00082   <font class="keywordtype">double</font> ActualNoise;
00083   <font class="keywordtype">double</font> originalsatur;
00084   <font class="keywordtype">double</font> exposure;
00085   <font class="keywordtype">double</font> readnoise;
00086   <font class="keywordtype">double</font> flatnoise;
00087   <font class="keywordtype">double</font> julianDate;
00088   <font class="keywordtype">double</font> airmass;
00089   <font class="keywordtype">double</font> originalskylevel;
00090   string photomReferenceName;
00091 
00092   <a class="code" href="class_frame.html">Frame</a> intersection;
00093   
00094   
00095 <font class="keyword">public</font> :
00096   ImageSum(<font class="keyword">const</font> string &amp;Name, ReducedImageList &amp;Images,
00097            <font class="keyword">const</font> <a class="code" href="class_reducedimage.html">ReducedImage</a> *PhotomReference = NULL,
00098            <font class="keyword">const</font> WeightingMethod AWMethod = WUnSet, 
00099            <font class="keyword">const</font> StackingMethod ASMethod = SUnSet);
00100 
00101   ImageSum(<font class="keyword">const</font> string &amp;Name);
00102   ImageSum()<font class="keyword"></font>{};
00103   ReducedImageList Components() <font class="keyword">const</font>;
00104 
00105   <font class="keywordtype">bool</font> <a class="code" href="class_reducedimage.html#a15">MakeFits</a>() ;
00106   <font class="keywordtype">bool</font> <a class="code" href="class_reducedimage.html#a21">MakeCatalog</a>() ; 
00107   <font class="keywordtype">bool</font> <a class="code" href="class_reducedimage.html#a24">MakeDead</a>();
00108   <font class="keywordtype">bool</font> <a class="code" href="class_reducedimage.html#a23">MakeSatur</a>();
00109   <font class="keywordtype">bool</font> MakeWeight();
00110   <font class="keywordtype">bool</font> <a class="code" href="class_dbimage.html#a27">Create</a>(<font class="keyword">const</font> string &amp;Where);
00111   <a class="code" href="class_reducedimage.html">ReducedImage</a> *Clone() <font class="keyword">const</font>;
00112 
00113   <font class="keywordtype">void</font> <a class="code" href="class_reducedimage.html#a36">dump</a>(ostream &amp; s = cout) <font class="keyword">const</font>;
00114 
00115   <font class="keyword">typedef</font> vector&lt;Component&gt;::iterator ComponentIterator;
00116   <font class="keyword">typedef</font> vector&lt;Component&gt;::const_iterator ComponentCIterator;
00117 
00118 <font class="preprocessor">#ifndef SWIG</font>
00119 <font class="preprocessor"></font>  ClassDef(<a class="code" href="class_imagesum.html">ImageSum</a>,1);
00120 <font class="preprocessor">#endif </font><font class="comment">/*SWIG */</font>
00121 
00122   ~ImageSum();
00123 
00124 <font class="keyword">private</font>:
00125   <font class="keywordtype">void</font> FitsHeaderFill();
00126 
00127 };
00128 
00129 
00131 
00132 <a class="code" href="class_imagesum.html">ImageSum</a>* ImagesAlignAndSum(<font class="keyword">const</font> ReducedImageList &amp;ToSum, 
00133                             <font class="keyword">const</font> <a class="code" href="class_reducedimage.html">ReducedImage</a> &amp;GeomReference, 
00134                             <font class="keyword">const</font> string &amp;SumName, <font class="keyword">const</font> <font class="keywordtype">int</font> ToDo,
00135                             <font class="keyword">const</font> <a class="code" href="class_reducedimage.html">ReducedImage</a> *PhotomRef = NULL,
00136                             <font class="keyword">const</font> WeightingMethod AWMethod = WUnSet, 
00137                             <font class="keyword">const</font> StackingMethod ASMethod = SUnSet);
00138 
00140 <font class="keywordtype">bool</font> ImagesAlignAndSum(<font class="keyword">const</font> vector&lt;string&gt; &amp;ToSum, 
00141                        <font class="keyword">const</font> string &amp;Reference, 
00142                        <font class="keyword">const</font> string &amp;SumName, <font class="keyword">const</font> <font class="keywordtype">int</font> ToDo);
00143 
00144 <font class="preprocessor">#endif </font><font class="comment">/* IMAGESUM__H */</font>
</pre></div><hr><address><small>Generated at Sun Feb 8 18:22:49 2004 for toads by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
